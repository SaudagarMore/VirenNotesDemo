NGINX full management and all commands

ğŸ½ï¸ Real-Life Analogy

Think of NGINX as a restaurant manager:

* It handles incoming guests (web traffic)
* Decides whether to serve from the kitchen (backend/server) or menu board (static content)
* Can even forward requests to another restaurant (proxy)

---

ğŸ› ï¸ STEP 1: Installing NGINX

ğŸ§‘â€ğŸ³ Real-Life: Hiring a manager for your restaurant (your server)

ğŸ“¦ Command (Debian/Ubuntu):

```bash
sudo apt update
sudo apt install nginx
```

ğŸ“¦ (RHEL/CentOS):

```bash
sudo yum install nginx
```

Then start NGINX:

```bash
sudo systemctl start nginx
```

Enable it to run on boot:

```bash
sudo systemctl enable nginx
```

Check status:

```bash
sudo systemctl status nginx
```

Test in browser:
Go to `http://your-server-ip` â†’ You should see the **Welcome to NGINX!** page.

---

ğŸ§­ STEP 2: Key NGINX File Locations

| File/Directory                | Purpose                            |
| ----------------------------- | ---------------------------------- |
| `/etc/nginx/nginx.conf`       | Main config file                   |
| `/etc/nginx/sites-available/` | Stores config for individual sites |
| `/etc/nginx/sites-enabled/`   | Active (linked) site configs       |
| `/var/www/html/`              | Default root folder for websites   |

---

ğŸŒ STEP 3: Serve a Static Website

ğŸ  Real-Life: Show customers a ready menu board (HTML page)

Steps:

```bash
sudo mkdir -p /var/www/mywebsite
sudo nano /var/www/mywebsite/index.html
```

Paste:

```html
<h1>Hello from NGINX!</h1>
```

Now create a config file:

```bash
sudo nano /etc/nginx/sites-available/mywebsite
```

Paste this basic config:

```nginx
server {
    listen 80;
    server_name localhost;

    root /var/www/mywebsite;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
```

Activate the site:

```bash
sudo ln -s /etc/nginx/sites-available/mywebsite /etc/nginx/sites-enabled/
sudo nginx -t           # Check config
sudo systemctl reload nginx
```

Visit: `http://your-server-ip` â†’ Youâ€™ll see your custom page!

---

ğŸ” STEP 4: Reverse Proxy to Backend (e.g., Node.js App)

ğŸœ Real-Life: Customer orders food â†’ NGINX forwards to kitchen

Example: Your backend runs at `http://localhost:3000`

Config:

```nginx
server {
    listen 80;
    server_name localhost;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

ğŸ” STEP 5: Enable SSL (HTTPS) Using Let's Encrypt

Install Certbot:

```bash
sudo apt install certbot python3-certbot-nginx
```

Generate SSL:

```bash
sudo certbot --nginx
```

Renew SSL (automated):

```bash
sudo certbot renew --dry-run
```

---

ğŸ§° STEP 6: NGINX Management Commands

| Task                        | Command                             |           |
| --------------------------- | ----------------------------------- | --------- |
| Start NGINX                 | `sudo systemctl start nginx`        |           |
| Stop NGINX                  | `sudo systemctl stop nginx`         |           |
| Restart                     | `sudo systemctl restart nginx`      |           |
| Reload config (no downtime) | `sudo systemctl reload nginx`       |           |
| Check status                | `sudo systemctl status nginx`       |           |
| Test config                 | `sudo nginx -t`                     |           |
| Show active ports           | \`sudo netstat -tuln                | grep 80\` |
| View logs                   | `tail -f /var/log/nginx/access.log` |           |

---

ğŸ”¥ STEP 7: Enable Gzip Compression (Improve Speed)

Edit:

```bash
sudo nano /etc/nginx/nginx.conf
```

Inside `http { ... }` block, add:

```nginx
gzip on;
gzip_types text/plain application/json text/css application/javascript;
```

Reload:

```bash
sudo systemctl reload nginx
```

---

ğŸ” STEP 8: Limit Access (Security)

Restrict by IP:

```nginx
location /admin {
    allow 192.168.1.100;
    deny all;
}
```

---

ğŸ“‚ STEP 9: Virtual Hosts (Hosting Multiple Websites)

Just repeat the process:

1. Create a folder for new site in `/var/www/site2`
2. Create a config in `/etc/nginx/sites-available/site2`
3. Link to `sites-enabled`
4. Reload NGINX

---

ğŸ§ª MINI PROJECT TO PRACTICE

```bash
Step 1: Setup site folder
sudo mkdir -p /var/www/testsite
echo "Welcome to Test Site" | sudo tee /var/www/testsite/index.html

Step 2: Create NGINX config
sudo nano /etc/nginx/sites-available/testsite
Paste basic config with root pointing to /var/www/testsite

Step 3: Enable it
sudo ln -s /etc/nginx/sites-available/testsite /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

---

ğŸ§¾ NGINX QUICK COMMAND CHEAT SHEET

| Task              | Command                             |
| ----------------- | ----------------------------------- |
| Install           | `sudo apt install nginx`            |
| Start             | `sudo systemctl start nginx`        |
| Reload            | `sudo systemctl reload nginx`       |
| Test config       | `sudo nginx -t`                     |
| Serve static site | Use `root` and `index`              |
| Reverse proxy     | Use `proxy_pass`                    |
| Enable HTTPS      | `sudo certbot --nginx`              |
| View logs         | `tail -f /var/log/nginx/access.log` |

---
